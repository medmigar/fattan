<!DOCTYPE html>
<html lang="fr">
<head>
	<title>Mathématiques</title>
	<meta charset="utf-8">
    <link rel="icon" href="../images/logo.png"sizes="20x20">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/menu.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel='stylesheet' href='https://use.fontawesome.com/releases/v5.7.0/css/all.css' integrity='sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ' crossorigin='anonymous'>
    <script src="../js/jquery-min.js"></script>
  <script src="../js/script.js"></script>
</head>
<body>
    <dialog id="mydialog"></dialog>    
    <header class="hed" id="header"><script>inclureHeader(header);</script></header>  
    <div id="conteneur">
        <div id="sc">
            <nav class="nav1"id="nav1"><script>inclureMenu(menu);</script></nav>
        </div>
        <div class="divMenu" id="divMenu">
            <button class='btnMenu' id="btnMenu" style="display: none;"><i class='fa fa-bars'></i> Menu</button>
            <button class='btnClose' id="btnClose"><i class='fa fa-close'></i> Close</button>
        </div>        
        <script>
            $(function(){

              $("#btnClose").click(function(){
                $("#sc").slideUp(3000);
                $('#btnClose').hide();
                $('#btnMenu').show();
              });

              $("#btnMenu").click(function(){
                $("#sc").slideDown(3000);
                $('#btnMenu').hide();
                $('#btnClose').show();
              });
            });
        </script>
        <div style="display: flex; flex-wrap: wrap; justify-content: center; align-items: center;background-color: #cecbc9;">
            <form name="fordiv" id="fordiv" autocomplete="on">
                <fieldset>
                    <legend>diviseurs</legend>
                    <label for="div">Entrez un nombre entier positif</label>
                    <input type="text" name="div" id="div" required class="put"placeholder="Entrez un nombre entier"><br>
                    <input type="button" value="diviseurs" onclick="diviseurs();document.fordiv.div.value='';" class="but">
                </fieldset>
            </form>    
        
            <form name="fortri" id="fortri" autocomplete="on">
                <fieldset>
                    <legend>Triangle</legend>
                    <label for="tri">Entrez un nombre entier positif</label>
                    <input type="text" name="tri" id="tri" required    class="put"placeholder="Entrez un nombre entier"><br>
                    <input type="button" onclick="triangle();document.fortri.tri.value='';" value="Triangle" class="but">
                </fieldset>
            </form>    
           
            <form name="forprem" id="forprem" autocomplete="on">
                <fieldset>
                    <legend>Nombres premiers</legend>
                    <label for="prem">Entrez un nombre entier positif</label><br>
                    <input type="text" name="prem" id="prem" required class="put"placeholder="Entrez un nombre entier"><br>
                    <input type="button" value="Premiers" onclick="premier();document.forprem.prem.value='';" class="but">
                </fieldset>
            </form>
        
            <form name="forcomp" id="forcomp" autocomplete="on">
                <fieldset>
                    <legend>Décomposition</legend>
                    <label for="comp">Entrez un nombre entier positif</label><br>
                    <input type="text" name="comp" id="comp" required     class="put"placeholder="Entrez un nombre entier"><br>
                    <input type="button" onclick="composer();document.forcomp.comp.value='';" value="Décomposer" class="but">
                </fieldset>
            </form>
        
            <form name="forpgcd" id="forpgcd" autocomplete="on">
                <fieldset>
                    <legend>PGCD</legend>
                    <label for="pgcd1">Entrez le premier nombre entier positif</label>
                    <input type="text" name="pgcd1" id="pgcd1" required   class="put"placeholder="Entrez un nombre entier"><br>
                    <label for="pgcd2">Entrez le deuxième nombre entier positif</label>
                    <input type="text" name="pgcd2" id="pgcd2" required class="put"placeholder="Entrez un nombre entier"><br>
                    <input type="button" value="PGCD" onclick="pgcd();document.forpgcd.pgcd2.value='';document.forpgcd.pgcd1.value='';" class="but">
                </fieldset>
            </form>    
            
            <form name="forppcm" id="forppcm" autocomplete="on">
                <fieldset>
                    <legend>PPCM</legend>
                    <label for="ppcm1">Entrez le premier nombre entier positif</label>
                    <input type="text" name="ppcm1" id="ppcm1" required  class="put"placeholder="Entrez un nombre entier"><br>
                    <label for="ppcm2">Entrez le deuxième nombre entier positif</label>
                    <input type="text" name="ppcm2" id="ppcm2" required class="put"placeholder="Entrez un nombre entier"><br>
                    <input type="button" onclick="ppcm();document.forppcm.ppcm1.value='';document.forppcm.ppcm2.value='';" value="PPCM" class="but">
                </fieldset>
            </form>
        </div>
    </div>
    <footer class="pied" id="footer"><script>inclureFooter(footer);</script></footer>
    <script>
        let result="<h1><span>&#127799;</span><br>Caractère invalide !<br>Entrer dans ce champ un nombre entier positif</h1><button class='btnMenu' onclick=\" dialog.close();dialog.style.display='none';\"><i class='fa fa-close'></i> </button>";
        let n=0;
        let dialog = document.getElementById('mydialog');
        let motif = /^[0-9]+$/;

        function premier(){
            n=parseInt(document.forprem.prem.value);
            let p=[]; 
            let texte="";
            let res=""; 
            let tab=[2]; 
            if (!motif.test(n)) {
                dialog.innerHTML =result;
                dialog.style.display='block'; 
                dialog.showModal();
            }else{
                for (let j = 3; j <=n; j++){
                if (j%2!=0) {
                    for (let i=1; i<=j; i++) {
                        if (j%i==0){
                            p.push(i);
                        }
                    }
                    if (p.length==2){
                        tab.push(j);
                    }
                    p.splice(0, p.length);
                }
            }
            for (let k = 0; k < tab.length; k++) {
                texte+=tab[k]+"  &nbsp;  ";
                res=texte.substring(0, texte.length-3);
            }
            res="<h3>La liste des nombres premiers inférieurs à "+
            n+"</h3>"+"<p class='pa'>"+res+"</p>";
            dialog.innerHTML=res+"<button class='btnMenu' onclick=\" dialog.close();dialog.style.display='none';document.forprem.prem.value='';\"><i class='fa fa-close'></i> </button>";
                    dialog.style.display='block'; 
                    dialog.showModal();;
            return tab;            
        }
        }

        function pgcd(){
            let  n1 = parseInt(document.forpgcd.pgcd1.value);
            let  n2 = parseInt(document.forpgcd.pgcd2.value);
            let di="";
            if (!motif.test(n1)||!motif.test(n2)) {
                dialog.innerHTML =result;
                dialog.style.display='block'; 
                dialog.showModal();
            }else{

            if (n2>n1){
                di=n1;
                n1=n2;
                n2=di;
            }

            while(n1>n2&&n1%n2!=0){
                di=n2;
                n2=n1%n2;
                n1=di;
            }

            di=n2;
            n1 = parseInt(document.forpgcd.pgcd1.value);
            n2 = parseInt(document.forpgcd.pgcd2.value);
            let m=(n1*n2)/di;
            dialog.innerHTML = "<h3>pgcd </h3><p class='pa'>pgcd("+n1+" , "+n2+") = "+di+"</p><button class='btnMenu' onclick=\" dialog.close();dialog.style.display='none';document.forpgcd.pgcd2.value='';document.forpgcd.pgcd1.value='';\"><i class='fa fa-close'></i> </button>";
            dialog.style.display='block'; 
                    dialog.showModal();
        }
         }

        function ppcm(){
            let  n1 = parseInt(document.forppcm.ppcm1.value);
            let  n2 = parseInt(document.forppcm.ppcm2.value);
            let di="";

            if (!motif.test(n1)||!motif.test(n2)) {
                dialog.innerHTML =result;
                dialog.style.display='block'; 
                dialog.showModal();
            }else{
            if (n2>n1){
                di=n1;
                n1=n2;
                n2=di;
            }

            while(n1>n2&&n1%n2!=0){
                di=n2;
                n2=n1%n2;
                n1=di;
            }

            di=n2;
            n1 = parseInt(document.forppcm.ppcm1.value);
            n2 = parseInt(document.forppcm.ppcm2.value);
            let m=(n1*n2)/di;
            dialog.innerHTML = "<h3>ppcm </h3><p class='pa'>ppcm("+n1+" , "+n2+") = "+m+"</p><button class='btnMenu' onclick=\" dialog.close();dialog.style.display='none';document.forppcm.ppcm1.value='';document.forppcm.ppcm2.value='';\"><i class='fa fa-close'></i> </button>";
            dialog.style.display='block'; 
            dialog.showModal();
        }
        }

        function diviseurs() {
            var str = document.fordiv.div.value;
            
            var text ="";
            var  n1 = parseInt(document.fordiv.div.value);
            var msg=document.getElementById('div');
            n1=Math.abs(n1);

              if (!motif.test(str)) {
dialog.innerHTML =result;
                    dialog.style.display='block'; 
                    dialog.showModal();
              }else{
                var tabn=[];
                for (var i = 1; i <= n1; i++) {
                    if (n1%i==0) {
                        tabn.push(i);
                    }
                    
                }
                var pre=n1;
                var msg;
                if (tabn.length==2) {msg="<b>Remarque:</b><br>"+pre+" est un nombre premier !"}
                    else{msg="<b>Remarque:</b><br>"+pre+" n'est pas un nombre premier !"}
                for (var j = 0; j < tabn.length; j++) {
                    text+=tabn[j]+", ";
                    var res=text.substring(0, text.length-1);
                }                    
                dialog.innerHTML ="<h3>Les diviseurs du nombre "+n1+" sont:</h3><p class='pa'>D = {"+res+"} <br>"+"le nombre des diviseurs de "+n1+" est: "+tabn.length+"<br>"+msg+"</p>"+
                "<button class='btnMenu' onclick=\" var dialog = document.getElementById('mydialog');dialog.close();dialog.style.display='none';document.fordiv.div.value='';\"><i class='fa fa-close'></i></button>";
                dialog.style.display='block'; 
                    dialog.showModal();
            }            
        }

        function composer() {

            n=parseInt(document.forcomp.comp.value);
            let p=[]; 
            let tab=[2];

            if (!motif.test(n)) {
                dialog.innerHTML =result;
                dialog.style.display='block'; 
                dialog.showModal();
            }else{        

            for (let j = 3; j <=n; j++){
                if (j%2!=0) {
                    for (let i=1; i<=j; i++) {
                        if (j%i==0){
                            p.push(i);
                        }
                    }
                    if (p.length==2){
                        tab.push(j);
                    }
                    p.splice(0, p.length);
                }
            }

            let facteurs=[];        
            for (let i = 0; i < tab.length; i++) {
                if (n%tab[i]==0) {
                    facteurs.push(tab[i]);
                    n=n/tab[i];
                    i--;
                }
            }
            n = parseInt(document.forcomp.comp.value);
            let sh="<h3>La décomposition en facteurs premiers</h3><p class='pa'>";
            let t=n;
            for (var i = 0; i < facteurs.length; i++) {            
                sh+=t+"/"+facteurs[i]+"<br>";
                t=t/facteurs[i];
            }
            sh+="1/1<br>";
            let puis=0;
            let rep=facteurs.length;      
            let af=n+" = ";
            if (facteurs.length==1){
                af+=facteurs[0];
                dialog.innerHTML=sh+af+"<br><b>Remarque:</b><br>"+n+" est un nombre premier !</p>"+"<button class='btnMenu' onclick=\" dialog.close();dialog.style.display='none'; dialog.innerHTML='';document.forcomp.comp.value='';\"><i class='fa fa-close'></i></button>";
                dialog.style.display='block'; 
                dialog.showModal();
            }
            if(facteurs.length!=1){
            while (facteurs.length!=0){
                for (var i = 1; i < rep; i++) {
                    if (facteurs[i-1]==facteurs[i]) {
                        puis++;
                    }
                    if (facteurs[i-1]!=facteurs[i]||i==facteurs.length-1) {
                        puis++;
                        af+=facteurs[i-1]+"<sup>"+puis+"</sup>x";
                        break;
                    }
                }facteurs.splice(0, puis);
                puis=0;
            }            
                let af1=af.substring(0, af.length-1);
                dialog.innerHTML=sh+af1+"</span></p>"+
                "<button class='btnMenu' onclick=\" dialog.close();dialog.style.display='none'; dialog.innerHTML='';document.forcomp.comp.value='';\"><i class='fa fa-close'></i></button>";
                dialog.style.display='block'; 
                    dialog.showModal();
            } 
        }
        }

        function triangle() {
            n = parseInt(document.fortri.tri.value);
            let tex;
            if (!motif.test(n)) {
                dialog.innerHTML =result;
                dialog.style.display='block'; 
                dialog.showModal();
            }else{
            let L1=[1,1], L=[1,1];
            for (i=1;i<=n;i++) {    
                let nL=[];   
                nL[0]=1;nL[i]=1;
                for (j=1;j<i;j++) {
                    nL[j]=L[j-1]+L[j];    
                }
                L=nL;
                L1[i]=nL.join(" ");
            }

            tex="<h3>Triangle de Pascal</h3><table>";
            for (let j = 0; j < L1.length; j++){
                tex+= "<tr><td>"+L1[j]+"</td></tr>";    
            }
            tex+="</table>";
            dialog.innerHTML =tex+
                "<button class='btnMenu' onclick=\" dialog.close();dialog.style.display='none'; dialog.innerHTML='';document.fortri.tri.value='';\"><i class='fa fa-close'></i></button>";
            dialog.style.display='block'; 
            dialog.showModal();
        }
        }
    </script>
</body>
</html>